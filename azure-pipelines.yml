# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

pool:
  vmImage: 'vs2017-win2016'

variables:
  version: 1.1

name:  $(TeamProject)_$(SourceBranchName)_$(version).$(Year:yy)$(DayOfYear)$(Rev:.r)

steps:
- task: DotNetCoreCLI@2
  displayName: 'Build package'
  inputs:
    command: 'pack'
    packagesToPack: TcpMux/TcpMux.csproj
    packDirectory: $(Build.ArtifactStagingDirectory)
    versioningScheme: byBuildNumber

- task: PublishBuildArtifacts@1

# - task: NuGetCommand@2
#   displayName: 'Publish to MyGet'
#   inputs:
#     command: push
#     nuGetFeedType: external
#     publishFeedCredentials: myget
#     versioningScheme: byEnvVar
#     versionEnvVar: Version
